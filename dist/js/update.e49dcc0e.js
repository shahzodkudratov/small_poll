(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["update"],{1754:function(e,t,s){},2366:function(e,t){for(var s=[],n=0;n<256;++n)s[n]=(n+256).toString(16).substr(1);function i(e,t){var n=t||0,i=s;return[i[e[n++]],i[e[n++]],i[e[n++]],i[e[n++]],"-",i[e[n++]],i[e[n++]],"-",i[e[n++]],i[e[n++]],"-",i[e[n++]],i[e[n++]],"-",i[e[n++]],i[e[n++]],i[e[n++]],i[e[n++]],i[e[n++]],i[e[n++]]].join("")}e.exports=i},2861:function(e,t,s){"use strict";var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"questions"},[s("transition-group",{attrs:{tag:"ul",name:"questions"}},e._l(e.poll.questions,(function(t){return s("li",{key:t.id,staticClass:"field",class:{skipped:t.skipped}},[s("div",{staticClass:"order"},[e._v(e._s(t.order))]),s("div",{staticClass:"header"},[s("span",{staticClass:"title"},[e._v("Radio buttons")]),e.poll.questions.length>1?s("i",{staticClass:"fa fa-trash fa-lg delete",on:{click:function(s){return e.deleteQuestion(t.id)}}}):e._e()]),s("div",{staticClass:"body"},[s("p",{staticClass:"question"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.question,expression:"question.question"}],attrs:{type:"text",placeholder:"type your question",required:"required",minlength:"3",maxlength:"255"},domProps:{value:t.question},on:{input:function(s){s.target.composing||e.$set(t,"question",s.target.value)}}})]),s("transition-group",{attrs:{tag:"ul",name:"answers"}},e._l(t.answers,(function(n){return s("li",{key:n.id,staticClass:"answer"},[s("span",[e._v("Answer")]),s("input",{directives:[{name:"model",rawName:"v-model",value:n.answer,expression:"answer.answer"}],attrs:{type:"text",required:"required",minlength:"3",maxlength:"255",placeholder:"type your answer"},domProps:{value:n.answer},on:{input:function(t){t.target.composing||e.$set(n,"answer",t.target.value)}}}),t.answers.length>2?s("i",{staticClass:"fa fa-trash fa-lg delete",on:{click:function(s){return e.deleteAnswer(t.id,n.id)}}}):e._e()])})),0),s("ul",{staticClass:"end"},[s("li",{staticClass:"answer"},[s("button",{on:{click:function(s){return e.addAnswer(t.id)}}},[e._v("Add more answer")])])])],1),s("div",{staticClass:"footer"},[s("div",[e._v(" Order: "),s("i",{staticClass:"fa fa-chevron-up",class:{disabled:1===t.order},attrs:{disabled:1===t.order},on:{click:function(s){return e.changeOrder("up",t)}}}),e._v(" "),s("span",{staticClass:"number"},[e._v(e._s(t.order))]),e._v(" "),s("i",{staticClass:"fa fa-chevron-down",class:{disabled:t.order===e.poll.questions.length},attrs:{disabled:t.order===e.poll.questions.length},on:{click:function(s){return e.changeOrder("down",t)}}})]),s("div",[s("label",[e._v("Skip: "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.skipped,expression:"question.skipped"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.skipped)?e._i(t.skipped,null)>-1:t.skipped},on:{change:function(s){var n=t.skipped,i=s.target,r=!!i.checked;if(Array.isArray(n)){var o=null,a=e._i(n,o);i.checked?a<0&&e.$set(t,"skipped",n.concat([o])):a>-1&&e.$set(t,"skipped",n.slice(0,a).concat(n.slice(a+1)))}else e.$set(t,"skipped",r)}}})])])])])})),0),s("ul",[s("li",{staticClass:"more",on:{click:e.addQuestion}},[s("i",{staticClass:"fa fa-plus"}),e._v(" Add more radio buttons ")]),s("li",{staticClass:"field"},[s("div",{staticClass:"order"},[e._v(e._s(e.poll.questions.length+1))]),e._m(0),s("div",{staticClass:"body"},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:e.poll.message,expression:"poll.message"}],attrs:{required:"required",minlength:"3",maxlength:"255"},domProps:{value:e.poll.message},on:{input:function(t){t.target.composing||e.$set(e.poll,"message",t.target.value)}}})]),s("div",{staticClass:"footer"},[e._v(" Order: "),s("span",{staticClass:"number"},[e._v(e._s(e.poll.questions.length+1))])])])])],1)},i=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"header"},[s("span",{staticClass:"title"},[e._v("Message")])])}],r=(s("7db0"),s("c740"),s("4160"),s("159b"),s("284c")),o=s("c64e"),a=s.n(o),l={props:["poll"],name:"questions",methods:{changeOrder:function(e,t){var s=t.order;"up"==e&&1!==s?(this.poll.questions.find((function(e){return e.order===s-1})).order=s,t.order-=1):"down"===e&&s!==this.poll.questions.length&&(this.poll.questions.find((function(e){return e.order===s+1})).order=s,t.order+=1)},rearrangeOrder:function(e){for(var t=this.poll.questions.findIndex((function(t){return t.id===e})),s=t+1;s<this.poll.questions.length;s++)this.poll.questions[s].order--},addAnswer:function(e){var t={type:"answer",isAdded:!0,id:a()(),question_uuid:e,answer:"",result:0};this.poll.questions.find((function(t){return t.id===e})).answers.push(t)},deleteAnswer:function(e,t){var s=this.poll.questions.findIndex((function(t){return t.id===e})),n=this.poll.questions[s],i=n.answers.findIndex((function(e){return e.id===t}));this.$delete(n.answers,i)},addQuestion:function(){var e={type:"question",isAdded:!0,id:a()(),poll_uuid:this.poll.id,order:this.poll.questions.length+1,answers:[]};this.poll.questions.push(e),this.addAnswer(e.id),this.addAnswer(e.id)},deleteQuestion:function(e){var t=this,s=this.poll.questions.findIndex((function(t){return t.id===e})),n=this.poll.questions[s],i=Object(r["a"])(n.answers);i.forEach((function(s){t.deleteAnswer(e,s.id)})),this.rearrangeOrder(e),this.$delete(this.poll.questions,s)}}},d=l,u=(s("403d"),s("2877")),c=Object(u["a"])(d,n,i,!1,null,null,null);t["a"]=c.exports},"403d":function(e,t,s){"use strict";var n=s("1754"),i=s.n(n);i.a},"4ae4":function(e,t,s){"use strict";s.r(t);var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"poll"},[e.notFound?e._e():s("div",{staticClass:"update"},[s("h1",{staticClass:"title"},[e._v("Edit poll")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.poll.name,expression:"poll.name"}],staticClass:"name",attrs:{type:"text",required:"",placeholder:"type poll name"},domProps:{value:e.poll.name},on:{input:function(t){t.target.composing||e.$set(e.poll,"name",t.target.value)}}}),s("p",{staticClass:"warning"},[e._v(" You can lost data if delete AND update the poll ")]),s("Questions",{attrs:{poll:e.sortedPoll}}),s("div",{staticClass:"buttons"},[s("button",{class:{disabled:e.isBusy},attrs:{disabled:e.isBusy},on:{click:function(t){return e.updatePoll(e.poll)}}},[e._v("Save changes")]),s("button",{class:{disabled:e.isBusy},attrs:{disabled:e.isBusy},on:{click:function(t){return e.deletePoll({poll:e.poll})}}},[e._v("Delete poll")]),s("router-link",{class:{disabled:e.isBusy},attrs:{to:"/",tag:"button",disabled:e.isBusy}},[e._v("Cancel")])],1)],1),e.notFound?e._e():s("Widget",{attrs:{poll:e.originPoll}})],1)},i=[],r=(s("a4d3"),s("4de4"),s("4160"),s("4e82"),s("0d03"),s("e439"),s("dbb4"),s("b64b"),s("159b"),s("2fa7")),o=s("2f62"),a=s("2861"),l=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"widget"},[s("div",{staticClass:"code"},[e._m(0),s("code",[e._v(' <div id="small_poll_widget"></div> <script>s_p_w_poll_uuid="'+e._s(e.poll.id)+'"<\/script> <script src="http://d3fdb600-4048-4a62-9cae-f17852506533.jexia.app/index.js"><\/script> ')])]),s("router-link",{attrs:{tag:"button",to:{name:"results",params:{id:e.poll.id}}}},[e._v("Check the results")])],1)},d=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("h3",{staticClass:"title"},[s("i",{staticClass:"fa fa-code"}),e._v(" Javascript web widget snippet")])}],u={props:["poll"]},c=u,p=(s("6cab"),s("2877")),f=Object(p["a"])(c,l,d,!1,null,null,null),v=f.exports;function h(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function m(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?h(s,!0).forEach((function(t){Object(r["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):h(s).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var g={components:{Questions:a["a"],Widget:v},data:function(){return{poll:{},notFound:!1}},computed:m({},Object(o["c"])({isBusy:"isBusy",getPollById:"poll/getPollById",validatePoll:"apicalls/validatePoll"}),{sortedPoll:function(){var e=this.poll;return e.questions.sort((function(e,t){return e.order-t.order})),e.questions.forEach((function(e){e.answers.sort((function(e,t){return new Date(e.created_at)-new Date(t.created_at)}))})),e},originPoll:function(){return this.getPollById(this.$attrs.id)}}),methods:m({},Object(o["d"])({updatePoll:"poll/updatePoll"}),{},Object(o["b"])({deletePoll:"apicalls/deletePoll"}),{updatePoll:function(e){var t=this;this.validatePoll({poll:e})&&this.$store.dispatch("poll/updatePoll",{poll:this.poll,originPoll:this.originPoll}).then((function(){t.$notify({group:"msg",type:"success",title:"Poll updated"})}))}}),created:function(){var e=this.getPollById(this.$attrs.id);e?this.poll=this.$_.cloneDeep(e):(this.notFound=!0,this.$router.push({path:"/"}))},beforeRouteUpdate:function(e,t,s){var n=this.getPollById(e.params.id);n?this.poll=this.$_.cloneDeep(n):(this.notFound=!0,this.$router.push({path:"/"})),s()}},b=g,w=(s("7ebf"),Object(p["a"])(b,n,i,!1,null,null,null));t["default"]=w.exports},"6cab":function(e,t,s){"use strict";var n=s("73ac"),i=s.n(n);i.a},"73ac":function(e,t,s){},"7ebf":function(e,t,s){"use strict";var n=s("a515"),i=s.n(n);i.a},a515:function(e,t,s){},c64e:function(e,t,s){var n=s("e1f4"),i=s("2366");function r(e,t,s){var r=t&&s||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null),e=e||{};var o=e.random||(e.rng||n)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,t)for(var a=0;a<16;++a)t[r+a]=o[a];return t||i(o)}e.exports=r},e1f4:function(e,t){var s="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(s){var n=new Uint8Array(16);e.exports=function(){return s(n),n}}else{var i=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0===(3&t)&&(e=4294967296*Math.random()),i[t]=e>>>((3&t)<<3)&255;return i}}}}]);
//# sourceMappingURL=update.e49dcc0e.js.map